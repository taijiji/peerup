purpus:  |
  本作業の目的は、ABC社 (AS65002) との BGPプライベートピアするものである。
  The target of operation is BGP private peering with ABC company(AS65002).
operator: Taiji Tsuchiya
operation_date: 20180410
hosts:
  hostname: vsrx1
  os : junos
  username: user1
  password: password1
  mgmt_ipaddress: 192.168.33.3

scenario:
  - check_hostname:
      hostname: vsrx1
  - check_model:
      model: firefly-perimeter
  - check_os_version:
  - check_interface:
      interface_name: ge-0/0/2
      interface_status: down
  - check_bgp_neighbor:
  - set_interface:
      interface_name: ge-0/0/2
      interface_address_ipv4: 192.168.35.1
      interface_subnet_ipv4: 30
      interface_description: AS65002_peer
  - check_interface:
      interface_name: ge-0/0/2
      interface_status: up
  - check_bgp_neighbor:
      neighbor_address_ipv4: 192.168.35.2
      neighbor_status: up
  - set_bgp_neighbor:
      interface_name: ge-0/0/2
      neighbor_asnum: 65002
      local_asnum: 65001
      neighbor_address_ipv4: 192.168.35.2
      neighbor_description: AS65002_peer
  - check_bgp_neighbor:
      neighbor_address_ipv4: 192.168.35.2
      neighbor_status: up
  - check_bgp_route_received:
      neighbor_address_ipv4: 192.168.35.2
      received_route_address_ipv4: 10.10.30.0
      received_route_subnet_ipv4: 24
  - check_bgp_route_advertised:
      neighbor_address_ipv4: 192.168.35.2
      advertised_route_address_ipv4: 10.10.10.0
      advertised_route_subnet_ipv4: 24
  - set_bgp_route_received:
  - check_bgp_route_received:
      neighbor_address_ipv4: 192.168.35.2
      received_route_address_ipv4: 10.10.30.0
      received_route_subnet_ipv4: 24
  - set_bgp_route_advertised:
      external_policy_name: AS65002_export
      advertised_route_address_ipv4: 10.10.10.0
      advertised_route_subnet_ipv4: 24
      interface_name: ge-0/0/2
      neighbor_address_ipv4: 192.168.35.2
  - check_bgp_route_advertised:
      neighbor_address_ipv4: 192.168.35.2
      advertised_route_address_ipv4: 10.10.10.0
      advertised_route_subnet_ipv4: 24