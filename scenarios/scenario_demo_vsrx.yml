purpus:  |
  本作業の目的は、ABC社 (AS65002) との BGPプライベートピアするものである。
  The target of operation is BGP private peering with ABC company(AS65002).
operator: Taiji Tsuchiya
operation_date: 20180410
hosts:
  hostname: vsrx
  os: junos
  username: user1
  password: password1
  mgmt_ipaddress: 192.168.33.3

scenario:
  - check_hostname:
      hostname: vsrx
  - check_model:
      model: FIREFLY-PERIMETER
  - check_os_version:
  - check_interface:
      if_name: ge-0/0/2
      if_status: down
  - check_bgp_neighbor:
      neighbor_addr: 192.168.35.2
      neighbor_status: up
  - set_interface:
      if_name: ge-0/0/2
      if_addr: 192.168.35.1
      if_subnet: 30
      if_description: AS65002_peer
  - check_interface:
      if_name: ge-0/0/2
      if_status: up
  - check_bgp_neighbor:
      neighbor_addr: 192.168.35.2
      neighbor_status: up
  - set_bgp_neighbor:
      if_name: ge-0/0/2
      neighbor_asnum: 65002
      local_asnum: 65001
      neighbor_addr: 192.168.35.2
      neighbor_description: AS65002_peer
  - check_bgp_neighbor:
      neighbor_addr: 192.168.35.2
      neighbor_status: up
  - check_bgp_route_received:
      neighbor_addr: 192.168.35.2
      received_route_addr: 10.10.30.0
      received_route_subnet: 24
  - check_bgp_route_advertised:
      neighbor_addr: 192.168.35.2
      advertised_route_addr: 10.10.10.0
      advertised_route_subnet: 24
  - set_bgp_route_received:
  - check_bgp_route_received:
      neighbor_addr: 192.168.35.2
      received_route_addr: 10.10.30.0
      received_route_subnet: 24
  - set_bgp_route_advertised:
      external_policy_name: AS65002_export
      advertised_route_addr: 10.10.10.0
      advertised_route_subnet: 24
      if_name: ge-0/0/2
      neighbor_addr: 192.168.35.2
  - check_bgp_route_advertised:
      neighbor_addr: 192.168.35.2
      advertised_route_addr: 10.10.10.0
      advertised_route_subnet: 24